# configs/config.yaml
experiment_name: subtitle-frequency-analysis

# ────────────────────────────────────────────
# Data Configuration
# ────────────────────────────────────────────
data:
  clean_dir: "data/clean/per_video"
  domain: "interview"
  text_column: "text"
  min_length: 10
  max_length: 150

# Input/Output
input_pattern: "data/clean/per_video/interview/*.en.csv"
output_dir: "data/clean/semantic_simple/interview"

# Hugging Face pipeline
hf_model: "google/flan-t5-small"
hf_max_length: 256
hf_do_sample: false

# Splitting
min_words: 4
split_regex: "(?<=[.!?])\\s+"

# 시행착오 사용되지 않음 > 처음에는 
step3:
  tfidf:
    max_features: 5000
    ngram_range: [3, 5]
    min_df: 2
    max_df: 0.9
  top_n: 10000

cluster:
  umap:
    n_neighbors: 15          # 기본 10
    min_dist: 0.1            # 기본 0.1
    metric: "cosine"
    random_state: 42
  hdbscan:
    min_cluster_size: 8     # 기본 5
    cluster_selection_epsilon: 0.1
    metric: "euclidean"
    cluster_selection_method: "eom"
  filtering:
    min_frequency: 2         # 최소 빈도 필터

embedding:
  model_name: "all-mpnet-base-v2"
  use_tfidf_weight: true

pca:
  n_components: 80
  random_state: 42

hdbscan:
  min_cluster_size: 10
  min_samples: 5
  cluster_selection_epsilon: 0.1
  cluster_selection_method: "eom"
  metric: "euclidean"

umap:
  n_neighbors: 10
  min_dist: 0.1
  random_state: 42

plot:
  figsize: [10, 8]
  dpi: 300

# ────────────────────────────────────────────
# Clustering (Step 4)
# ────────────────────────────────────────────
step4:
  embedding:
    model_name: "sentence-transformers/all-MiniLM-L6-v2"
    batch_size: 64
  clustering:
    min_cluster_size: 10
    min_samples: 5
    metric: "euclidean"
    cluster_selection_method: "eom"

# ────────────────────────────────────────────
# Broken English (Step 5)
# ────────────────────────────────────────────
step5:
  broken_english:
    model_name: "textattack/bert-base-uncased-CoLA"
    threshold: 0.5
    batch_size: 32
